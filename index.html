<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>infinite-scroll demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="left"></div>
      <div class="center sliding" style="left: 0px;">Infinite Scroll</div>
      <div class="right"></div>
    </div>
  </div>
  <div class="list-block-wrapper">
    <div class="list-block">
      <ul class="list-block-ul">
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 1</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 2</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 3</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 4</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 5</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 6</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 7</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 8</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 9</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 10</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 11</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 12</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 13</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 14</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 15</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 16</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 17</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 18</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 19</div>
          </div>
        </li>
        <li class="item-content">
          <div class="item-inner">
            <div class="item-title">Item 20</div>
          </div>
        </li>
      </ul>
    </div>
    <p class="preload-text">加载中...</p>
  </div>
  <script>
    const listWrapperEl = document.querySelector('.list-block-wrapper');
    listWrapperEl.style.height = window.innerHeight - 44 + 'px';
    var count = 21;
    listWrapperEl.addEventListener('scroll',function () {
      const listWrapperEl = document.querySelector('.list-block-wrapper');
      const listWrapperChildEl = listWrapperEl.querySelector('.list-block');
      const listBlockUlEl = document.querySelector('.list-block-ul');
      var diff = listWrapperChildEl.clientHeight - listWrapperEl.clientHeight;
      if (listWrapperEl.scrollTop + 1> diff) {
        const preLoadEl = document.querySelector('.preload-text');
        preLoadEl.style.display = 'block';
        setTimeout(function () {
          preLoadEl.style.display = 'none';
          for(var i = 0; i < 5; i++) {
            var liEl = document.createElement('li');
            liEl.className = 'item-content';
            liEl.innerHTML = '<div class="item-inner"><div class="item-title">item '+ count +'</div></div>';
            listBlockUlEl.appendChild(liEl);
            count++;
          }
        },1000)
      }
    })
  </script>
</body>
</html>